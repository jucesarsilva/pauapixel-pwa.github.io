(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{"023e":function(t,o,e){"use strict";e("551c"),e("06db");var a=e("bc3a"),n=e.n(a),r=e("5206"),s=e("bd5e"),i=e("ba11"),c=function(t){return new Promise((function(o,e){n.a.get("".concat(r["a"].api,"user/existsEmail/").concat(t)).then((function(t){o(t)})).catch((function(t){Object(s["a"])(t,"Não foi possível validar esse e-mail."),e(t)}))}))},l=function(t){return new Promise((function(o,e){n()({method:"post",url:"".concat(r["a"].api,"user/register"),data:t,headers:{"Content-Type":"application/json"}}).then((function(t){Object(i["a"])("Usuário cadastrado com sucesso."),o(t)})).catch((function(t){Object(s["a"])(t,"Não foi possível cadastrar o usuário."),e(t)}))}))},u=function(){return new Promise((function(t,o){n.a.get("".concat(r["a"].api,"user/associate")).then((function(o){t(o)})).catch((function(t){Object(s["a"])(t,"Não foi possível obter os usuários."),o(t)}))}))};o["a"]={existsEmail:c,register:l,associate:u}},"8fdd":function(t,o,e){"use strict";e("551c"),e("06db");var a=e("bc3a"),n=e.n(a),r=e("5206"),s=e("bd5e"),i=e("ba11"),c=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"codProject,ASC";return new Promise((function(i,c){n.a.get("".concat(r["a"].api,"project/").concat(t||"","?page=").concat(o,"&size=").concat(e,"&sort=").concat(a)).then((function(t){i(t)})).catch((function(t){Object(s["a"])(t,"Não foi possível recuperar o projeto para esse usuário."),c(t)}))}))},l=function(t){return new Promise((function(o,e){n.a.get("".concat(r["a"].api,"project/findByCodProject/").concat(t)).then((function(t){o(t)})).catch((function(t){Object(s["a"])(t,"Não foi possível recuperar o projeto para esse usuário."),e(t)}))}))},u=function(t){return new Promise((function(o,e){n()({method:"post",url:"".concat(r["a"].api,"project/save"),data:t,headers:{"Content-Type":"application/json"}}).then((function(t){Object(i["a"])("Projeto salvo com sucesso."),o(t)})).catch((function(t){Object(s["a"])(t,"Não foi possível salvar o Projeto."),e(t)}))}))},d=function(t){return new Promise((function(o,e){n.a.get("".concat(r["a"].api,"project/remove/").concat(t)).then((function(t){o(t)})).catch((function(t){Object(s["a"])(t,"Não foi possível remover o projeto."),e(t)}))}))};o["a"]={findAll:c,getProjectBy:l,save:u,remove:d}},9506:function(t,o,e){"use strict";e.r(o);var a=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("section",{staticClass:"page row justify-center"},[e("q-card",{staticClass:"card-layout page-card",attrs:{inline:""}},[e("q-card-section",{staticClass:"full-height"},[e("q-breadcrumbs",{staticClass:"row q-mb-md text-grey-7",attrs:{"active-color":"primary"},scopedSlots:t._u([{key:"separator",fn:function(){return[e("q-icon",{attrs:{name:"chevron_right",color:"primary"}})]},proxy:!0}])},[e("q-breadcrumbs-el",{attrs:{icon:"home",label:"Projetos",to:"/"}})],1),e("q-table",{attrs:{color:"secondary",grid:"","hide-header":"","row-key":"name","rows-per-page-label":"Por página","no-results-label":"Nenhum projeto encontrado.","no-data-label":"Nenhum projeto cadastrado.","loading-label":"Buscando...","rows-per-page-options":[6,12,24],data:t.projects,columns:t.columns,filter:t.filter,pagination:t.pagination,loading:t.loading},on:{"update:pagination":function(o){t.pagination=o},request:t.findAll},scopedSlots:t._u([{key:"top",fn:function(){return[e("div",{staticClass:"column full-width"},[e("div",{staticClass:"row justify-between items-center full-width q-mb-lg"},[e("div",{staticClass:"row col-grow"},[e("q-input",{staticClass:"col-xs-10 col-sm-8 col-md-8 col-lg-4",attrs:{clearable:"",filled:"",color:"secondary",label:"Pesquisar"},scopedSlots:t._u([{key:"append",fn:function(){return[e("q-icon",{attrs:{name:"search",color:"secondary"}})]},proxy:!0}]),model:{value:t.filter,callback:function(o){t.filter=o},expression:"filter"}})],1),e("div",[e("q-btn",{attrs:{round:"",color:"secondary",icon:"add"},on:{click:function(o){return t.goToProject()}}})],1)]),e("div",{staticClass:"separator"})])]},proxy:!0},{key:"item",fn:function(o){return[e("section",{staticClass:"q-pa-xs q-mb-xs col-xs-12 col-sm-6 col-md-6 col-lg-3 grid-style-transition"},[e("q-card",{staticClass:"bg-primary",attrs:{dark:""}},[e("q-card-section",{staticClass:"row justify-between"},[e("div",{staticClass:"text-h6"},[t._v(t._s(o.row.name))]),e("div",[e("q-btn",{attrs:{outline:"",round:"",size:"sm",color:"white",icon:"edit"},on:{click:function(e){return t.goToProject(o.row.codProject)}}}),e("q-btn",{staticClass:"q-ml-sm",attrs:{outline:"",round:"",size:"sm",color:"white",icon:"delete"},on:{click:function(e){return t.confirmRemove(o.row.codProject)}}})],1)]),e("q-separator",{attrs:{dark:"",inset:""}}),e("q-card-section",[0===o.row.associate.length?e("q-badge",{staticClass:"row full-width",attrs:{outline:"",color:"white"}},[e("q-icon",{staticClass:"q-mr-sm",attrs:{name:"error_outline",color:"white",size:"24px"}}),t._v("\n                  Nenhum associado ao projeto.\n                ")],1):e("q-badge",{staticClass:"row full-width cursor-pointer",attrs:{outline:"",color:"white"},on:{click:function(e){return t.openModal(o.row)}}},[e("q-icon",{staticClass:"q-mr-sm",attrs:{name:"people_outline",color:"white",size:"24px"}}),t._v("\n                  Ver usuários\n                ")],1)],1)],1)],1)]}},{key:"pagination",fn:function(o){return[e("q-btn",{staticClass:"q-mr-sm",attrs:{disable:o.isFirstPage,icon:"keyboard_arrow_left",color:"secondary",size:"sm",round:"",dense:""},on:{click:o.prevPage}}),e("div",{staticClass:"q-mr-sm text-caption"},[o.pagesNumber!==1/0?e("span",[t._v("\n              "+t._s(o.pagination.page)+" de "+t._s(o.pagesNumber)+"\n            ")]):t._e(),o.pagesNumber===1/0?e("span",[t._v("\n              Todos resultados\n            ")]):t._e()]),e("q-btn",{attrs:{disable:o.isLastPage,icon:"keyboard_arrow_right",color:"secondary",size:"sm",round:"",dense:""},on:{click:o.nextPage}})]}}])}),e("q-dialog",{on:{hide:t.closeModal},model:{value:t.modal,callback:function(o){t.modal=o},expression:"modal"}},[e("q-card",{staticClass:"card-layout"},[e("q-card-section",[e("div",{staticClass:"text-h6 text-secondary"},[t._v(t._s(t.project?t.project.name:""))])]),t.project?e("q-card-section",{staticClass:"q-pt-none"},t._l(t.project.associate,(function(o,a){return e("q-chip",{key:a},[e("q-avatar",{attrs:{color:"secondary","text-color":"white"}},[t._v("\n                "+t._s(o.name.charAt(0).toUpperCase())+"\n              ")]),t._v("\n              "+t._s(o.name)+" - "+t._s(o.role)+"\n            ")],1)})),1):t._e(),e("q-card-actions",{attrs:{align:"right"}},[e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"OK",color:"secondary"}})],1)],1)],1)],1)],1)],1)},n=[],r=(e("7514"),e("7f7f"),{data:function(){return{filter:"",loading:!1,rowsPerPage:[6,12,24],pagination:{page:1,rowsNumber:6,rowsPerPage:6}}},methods:{parsePaginationParams:function(t){var o;t.sortBy&&(o="".concat(t.sortBy,",").concat(t.descending?"DESC":"ASC"));var e=t.page-1,a=t.rowsPerPage;return{page:e,size:a,sort:o}}}}),s=r,i=e("023e"),c=e("8fdd"),l={name:"ProjectsPage",mixins:[s],data:function(){return{loading:!1,columns:[{name:"codProject",required:!0,label:"Cod.",align:"left",field:function(t){return t.name},format:function(t){return"".concat(t)},sortable:!1},{name:"Nome",required:!0,label:"name",align:"left",field:function(t){return t.name},format:function(t){return"".concat(t)},sortable:!1},{name:"Associados",required:!0,label:"associate",align:"left",field:function(t){return t.name},format:function(t){return"".concat(t)},sortable:!1}],projects:[],users:[],project:[],modal:!1}},mounted:function(){this.getAssociate(),this.findAll({pagination:this.pagination,filter:this.filter})},methods:{goToProject:function(t){this.$router.push({path:"projects/project/".concat(t||"")})},openModal:function(t){this.project=t,this.modal=!0},closeModal:function(){this.project=null,this.modal=!1},confirmRemove:function(t){var o=this;this.$q.dialog({title:"Atenção!",message:"Deseja realmente remover esse projeto?",noBackdropDismiss:!0,noEscDismiss:!0,color:"tertiary",ok:"SIM",cancel:"NÃO"}).onOk((function(){o.loading=!1,c["a"].remove(t).then((function(t){o.loading=!1,o.findAll({pagination:o.pagination,filter:o.filter})})).catch((function(){o.loading=!1}))})).onCancel((function(){}))},findAll:function(t){var o=this,e=t.pagination,a=t.filter;this.loading=!0;var n=this.parsePaginationParams(e);c["a"].findAll(a,n.page,n.size,n.sort).then((function(t){o.loading=!1,o.pagination=e,o.pagination.rowsNumber=t.data.totalElements,o.projects=t.data.content,o.formatAssociates()})).catch((function(){o.loading=!1}))},formatAssociates:function(){var t=this;this.projects.forEach((function(o){var e=[];o.associate.forEach((function(o){var a=t.users.find((function(t){var e=t.roles.find((function(t){return t.codRole===o.codRole}));return t.codUser===o.codUser&&e}));a&&e.push({name:a.name,role:a.roles.find((function(t){return t.codRole===o.codRole})).label})})),o.associate=e}))},getAssociate:function(){var t=this;i["a"].associate().then((function(o){return t.users=o.data}))}}},u=l,d=e("2877"),f=Object(d["a"])(u,a,n,!1,null,null,null);o["default"]=f.exports},ba11:function(t,o,e){"use strict";var a=e("a85c"),n=function(t){a["a"].success(t)};o["a"]=n},bd5e:function(t,o,e){"use strict";var a=e("a85c"),n=function(t,o){t&&t.ERR_INTERNET_DISCONNECTED||t&&t.SESSION_EXPIRED||a["a"].error(o)};o["a"]=n}}]);